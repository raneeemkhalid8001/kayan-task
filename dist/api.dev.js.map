{"version":3,"sources":["api.js"],"names":["client","require","express","cors","bodyParser","app","use","urlencoded","extended","json","listen","console","log","connect","post","req","res","body","interact","selectQuery","drugCode","diseaseCode","type","x2js","X2JS","new_xml","json2xml_str","JSON","parse","result","vkbeautify","xml","query","err","rowCount","send","rows","message","end"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,iBAAD,CAAtB;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,UAAU,GAAGH,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAMI,GAAG,GAAGH,OAAO,EAAnB;AACAG,GAAG,CAACC,GAAJ,CAAQH,IAAI,EAAZ;AACAE,GAAG,CAACC,GAAJ,CAAQF,UAAU,CAACG,UAAX,CAAsB;AAACC,EAAAA,QAAQ,EAAE;AAAX,CAAtB,CAAR;AACAH,GAAG,CAACC,GAAJ,CAAQF,UAAU,CAACK,IAAX,EAAR;AACAJ,GAAG,CAACK,MAAJ,CAAW,IAAX,EAAiB,YAAI;AACjBC,EAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ;AACH,CAFD;AAGAZ,MAAM,CAACa,OAAP;AACAR,GAAG,CAACS,IAAJ,CAAS,cAAT,EAAyB,UAACC,GAAD,EAAMC,GAAN,EAAa;AAClCL,EAAAA,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACE,IAAhB,EADkC,CAElC;AACA;AACA;;AACA,MAAMC,QAAQ,GAAGH,GAAG,CAACE,IAArB;AACA,MAAIE,WAAW,kEACCD,QAAQ,CAACE,QADV,yCAEOF,QAAQ,CAACG,WAFhB,2BAE4CH,QAAQ,CAACI,IAFrD,MAAf;AAGA,MAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,MAAMC,OAAO,GAAGF,IAAI,CAACG,YAAL,CAAkBC,IAAI,CAACC,KAAL,CAAWC,MAAX,CAAlB,CAAhB;AACAC,EAAAA,UAAU,CAACC,GAAX,CAAeN,OAAf,EAAwB,CAAxB;AACAzB,EAAAA,MAAM,CAACgC,KAAP,CAAab,WAAb,EAA0B,UAACc,GAAD,EAAMJ,MAAN,EAAe;AACrC,QAAG,CAACI,GAAJ,EAAQ;AACJ,UAAGJ,MAAM,CAACK,QAAP,IAAiB,CAApB,EAAsB;AAClBvB,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAI,QAAAA,GAAG,CAACmB,IAAJ,CAAS,WAAT;AACH,OAHD,MAII;AACJ;AACAnB,QAAAA,GAAG,CAACmB,IAAJ,CAASN,MAAM,CAACO,IAAhB;AACC;AACJ,KATD,MAUI;AACAzB,MAAAA,OAAO,CAACC,GAAR,CAAYqB,GAAG,CAACI,OAAhB;AACP;AACA,GAdD;AAeArC,EAAAA,MAAM,CAACsC,GAAP;AACH,CA5BD","sourcesContent":["const client = require('./connection.js')\r\nconst express = require('express');\r\nvar cors = require(\"cors\");\r\nvar bodyParser = require('body-parser');\r\nconst app = express();\r\napp.use(cors());\r\napp.use(bodyParser.urlencoded({extended: false}));\r\napp.use(bodyParser.json());\r\napp.listen(3300, ()=>{\r\n    console.log(\"Sever is now listening at port 3300\");\r\n})\r\nclient.connect();\r\napp.post('/interaction', (req, res)=> {\r\n    console.log(req.body);\r\n    // console.log(req.body.description);\r\n    // console.log(req.body.drugCode);\r\n    // console.log(req.body.diseaseCode);\r\n    const interact = req.body;\r\n    let selectQuery = `select * from interactions where \r\n     drug_code = '${interact.drugCode}' \r\n    and disease_code = '${interact.diseaseCode}' and type = '${interact.type}'`\r\n    const x2js = new X2JS();\r\n    const new_xml = x2js.json2xml_str(JSON.parse(result));\r\n    vkbeautify.xml(new_xml, 4);\r\n    client.query(selectQuery, (err, result)=>{\r\n        if(!err){\r\n            if(result.rowCount==0){\r\n                console.log(\"not found\")\r\n                res.send(\"not found\")\r\n            }\r\n            else{\r\n            // console.log(result.rows);\r\n            res.send(result.rows);\r\n            }\r\n        }\r\n        else{\r\n            console.log(err.message)\r\n    }\r\n    })\r\n    client.end;\r\n})\r\n\r\n\r\n\r\n"],"file":"api.dev.js"}