{"version":3,"sources":["api.js"],"names":["client","require","express","bodyParser","app","use","cors","urlencoded","extended","json","console","log","connect","res","req","body","selectQuery","concat","interact","drugCode","type","new_xml","json2xml_str","JSON","parse","result","vkbeautify","xml","query","err","message","rowCount","x2js","send","rows","end"],"mappings":"aAAA,IAAMA,OAASC,QAAQ,mBACjBC,QAAUD,QAAQ,WADlBD,KAAMC,QAAGA,QAGXE,WAAaF,QAAQ,eAFnBC,IAAOA,UAIbE,IAAIC,IAAIC,QAHRF,IAAIE,IAAIH,WAAWI,WAAnB,CAAAC,UAAA,KAKAJ,IAAIC,IAAIF,WAAWM,QAJnBL,IAAID,OAAAA,KAAaF,WAMbS,QAAQC,IAAI,yCAJhBP,OAAAQ,UACAR,IAAIC,KAAIF,eAAWI,SAAAA,EAAWM,GAACL,QAAUG,IAAAG,EAAAC,MAGrCL,IAAQC,EAAIG,EAAAC,KADhBC,EAAA,wDAAAC,OAGAC,EAAAC,SAHA,gCAAAF,OAIyBC,EAACJ,YAJ1B,kBAAAG,OAIsCC,EAAAE,KAJtC,KAOIC,GAFe,IAACN,MAEhBO,aAAAC,KAAAC,MAAAC,SACAC,WAAAC,IAAAN,EAAA,GAQArB,OAAO4B,MAAMZ,EAAa,SAACa,EAAKJ,GAP1BP,EAcER,QAAAC,IAAAkB,EAAAC,SAbO,GAAXd,EAAWe,UAGFrB,QAAbC,IAAA,aACgBqB,EAAIC,KAACX,cAIVG,EAAMQ,KAACF,EAAPG,QAQNlC,OACGmC","file":"api.min.js","sourcesContent":["const client = require('./connection.js')\r\nconst express = require('express');\r\nvar cors = require(\"cors\");\r\nvar bodyParser = require('body-parser');\r\nconst app = express();\r\napp.use(cors());\r\napp.use(bodyParser.urlencoded({extended: false}));\r\napp.use(bodyParser.json());\r\napp.listen(3300, ()=>{\r\n    console.log(\"Sever is now listening at port 3300\");\r\n})\r\nclient.connect();\r\napp.post('/interaction', (req, res)=> {\r\n    console.log(req.body);\r\n    // console.log(req.body.description);\r\n    // console.log(req.body.drugCode);\r\n    // console.log(req.body.diseaseCode);\r\n    const interact = req.body;\r\n    let selectQuery = `select * from interactions where \r\n     drug_code = '${interact.drugCode}' \r\n    and disease_code = '${interact.diseaseCode}' and type = '${interact.type}'`\r\n    const x2js = new X2JS();\r\n    const new_xml = x2js.json2xml_str(JSON.parse(result));\r\n    vkbeautify.xml(new_xml, 4);\r\n    client.query(selectQuery, (err, result)=>{\r\n        if(!err){\r\n            if(result.rowCount==0){\r\n                console.log(\"not found\")\r\n                res.send(\"not found\")\r\n            }\r\n            else{\r\n            // console.log(result.rows);\r\n            res.send(result.rows);\r\n            }\r\n        }\r\n        else{\r\n            console.log(err.message)\r\n    }\r\n    })\r\n    client.end;\r\n})\r\n\r\n\r\n\r\n"]}